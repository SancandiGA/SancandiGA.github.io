<!DOCTYPE html>
<html>
  <head>
    <title>Tabella Migranti 2</title>
    <link rel="icon" type="image/x-icon" href="https://t3.ftcdn.net/jpg/05/46/46/14/360_F_546461498_eAK0ADH2mE0Y1VNG7wpjIgtXFxT0mR0a.jpg">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
  <body>
    <h1>Tabella Migranti 2</h1>
    <label for="csvFile"> Inserisci il file CSV: </label>
    <input type="file" id="csvFile" name="csvFile" accept=.csv>
    <button onclick="caricaFile()">Carica</button>
    <br><br>
    <table id="tabella">
      <thead>
      </thead>
      <tbody>
      </tbody>
    </table>
    <canva id="canva"> </canva>
    <script>
      function caricaFile() {
        const input = document.getElementById("csvFile");
        let file = input.files[0];
        let reader = new FileReader();
        reader.readAsText(file);
        reader.onload = function() {
          let risultato = reader.result;
          riempiTabella(risultato);
        };
      }

      function riempiTabella(data) {
        const dataSplit = data.split("\n");
        const tableBody = document.querySelector("#tabella tbody");
        dataSplit.forEach((element) => {
          const riga = document.createElement("tr");
          const colonne = element.split(",");
          colonne.forEach((col) => {
            const colonna = document.createElement("td");
            const testo = document.createTextNode(col.replace(/"/g, ""));
            colonna.appendChild(testo);
            riga.appendChild(colonna);
          });
          tableBody.appendChild(riga);
        });
        graficoCanva(dataSplit);
      }
      
      function graficoCanva(data) {
        console.log(data);
      }
    </script>
    <a href="../Periodo2/Pentamestre.html">Clicca qui per tornare alla pagina precedente</a>
  </body>
</html>
